<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>FuelPHP をもっと Composer で使う | chatii-log Webの人になりたい</title>
    
    <link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/main.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
  </head>
  
  <body class="articles articles_php articles_php_2013 articles_php_2013_12 articles_php_2013_12_fuelphp-composer">
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=535530176520013";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>
    <div id="container">
      <div id="contents">
        
          <article>
	
	<h1 class="article-title"><a href="/articles/php/2013/12/fuelphp-composer.html">FuelPHP をもっと Composer で使う</a></h1>
	<div class="article-header">
		<div class="left-box">
			<div class="timestamp">
				<div class="created">
					公開日: 2013年12月11日
				</div>
			</div>
			<div class="category">
				カテゴリ:  <a href="/articles/categories/php.html" title=""></a>
			</div>
			<div class="social">
				<div class="wsbl_twitter">
	<iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url=http%3A%2F%2Fchatii.net%2Farticles%2Fphp%2F2013%2F12%2Ffuelphp-composer.html&amp;text=FuelPHP%20%E3%82%92%E3%82%82%E3%81%A3%E3%81%A8%20Composer%20%E3%81%A7%E4%BD%BF%E3%81%86&amp;via=chatii0079&amp;lang=ja&amp;count=horizontal" style="width:100px; height:20px;"></iframe>
</div>
<div class="wsbl_evernote">
	<a href="#" onclick="Evernote.doClip({ title:'title', url:'http://chatii.net/articles/php/2013/12/fuelphp-composer.html' });return false;"><img src="http://static.evernote.com/article-clipper-jp.png"></a>
</div>
<div class="wsbl_google_plus_one">
	<!-- +1 ボタン を表示したい位置に次のタグを貼り付けてください。 -->
	<div class="g-plusone" data-size="medium" data-href="http://chatii.net/articles/php/2013/12/fuelphp-composer.html"></div>

	<!-- 最後の +1 ボタン タグの後に次のタグを貼り付けてください。 -->
	<script type="text/javascript">
	  window.___gcfg = {lang: 'ja'};

	  (function() {
	    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
	    po.src = 'https://apis.google.com/js/plusone.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	  })();
	</script>
</div>
<div class="wsbl_facebook_like">
	<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fchatii.net%2Farticles%2Fphp%2F2013%2F12%2Ffuelphp-composer.html&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=true&amp;share=false&amp;height=21&amp;appId=535530176520013" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; width: 100px;" allowTransparency="true"></iframe>
</div>
<div class="wsbl_pocket">
	<div class="pocket-btn">
		<iframe width="66" height="22" id="pocket-button-0" frameborder="0" allowtransparency="true" scrolling="NO" src="https://widgets.getpocket.com/v1/button?label=pocket&amp;count=none&amp;align=left&amp;v=1&amp;url=http%3A%2F%2Fchatii.net%2Farticles%2Fphp%2F2013%2F12%2Ffuelphp-composer.html&amp;title=FuelPHP%20%E3%82%92%E3%82%82%E3%81%A3%E3%81%A8%20Composer%20%E3%81%A7%E4%BD%BF%E3%81%86&amp;src=http%3A%2F%2Fchatii.net%2Farticles%2Fphp%2F2013%2F12%2Ffuelphp-composer.html&amp;r=0.3651652089320123"></iframe>
	</div>
	<script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
</div>
			</div>
		</div>
		<div class="right-box ad">
			<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Article Header -->
<ins class="adsbygoogle"
     style="display:inline-block;width:200px;height:200px"
     data-ad-client="ca-pub-0351317529099093"
     data-ad-slot="1188369939"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
	<section>
		<p>こんにちは、chatii です。<a href="http://atnd.org/events/45096">FuelPHP Advent Calendar 2013</a> 11日目を担当させていただきます。</p>

<p>前日は <a href="https://twitter.com/ounziw">@ownziw</a> さんの「<a href="http://ounziw.com/2013/12/10/event-application/">イベント機能を使ってアプリケーションをカスタマイズする</a>」でした。</p>

<p>本日は chatii が Composer で FuelPHP を入れた話を披露したいと思います。</p>

<p></p>

<h2 id="composer--fuelphp-">Composer を採用した FuelPHP への不満</h2>

<p>さて、みなさん Composer への理解は進みましたか？chatii はほぼ日曜プログラマー的レガシー的野良PHPerなわけでして、フレームワークおいしいれす(^q^) → Composer なにそれうまいの？という状態で FuelPHP 1.6 を迎えました。「<a href="/articles/review/2013/10/php-engineer-book-review.html">PHPエンジニア養成読本</a>」のおかげで今やそれなりにモダンなPHPerになれたと思います。</p>

<p>さて、Composerのドキュメントを読みますと</p>

<blockquote>
  <p>Composer is a tool for dependency management in PHP.</p>
</blockquote>

<p>Composer はPHPの依存性管理ツールです、と言っております。そこで我らが FuelPHP を見てみますと、そうですね、えらく中途半端な感があります。ちょうどこの頃、こちらのスライドを拝見しまして。</p>

<iframe src="http://www.slideshare.net/slideshow/embed_code/27122153" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen=""> </iframe>
<div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/keishihosoba/fuel-phpcomposer" title="Fuel phpをcomposerに本気で対応させた時の話" target="_blank">Fuel phpをcomposerに本気で対応させた時の話</a> </strong> from <strong><a href="http://www.slideshare.net/keishihosoba" target="_blank">Keishi Hosoba</a></strong> </div>

<p>そうですね、今年の Advent Calendar にも参加されている <a href="https://twitter.com/hosopy">@hosopy</a>さんのスライドですね。</p>

<p>言いたいことは全部言われてしまっていますが、要約すると、「なんで全部 Composerで入ってくれないの？」と。利用者の立場から言うとですね、それ以外の立場ってあんまないですけど、「おいらのこの新しいプロジェクトは、FuelPHPに依存してるんですよ！その辺 Composer先生にはきっちりやっていただきたい！」</p>

<p>ということで。細羽さんのスライドを参考にしつつ、git submodule どころか、oil も使わないオレオレなcomposer.jsonを書いてみました。</p>

<h2 id="git-submodule-amp-oil">脱git submodule &amp; oil</h2>

<p>まず、git submodule は全て composer.json に加えることができます。</p>

<ul>
  <li>fuel/core</li>
  <li>fuel/auth</li>
  <li>fuel/email</li>
  <li>fuel/oil</li>
  <li>fuel/orm</li>
  <li>fuel/parser</li>
</ul>

<p>うん、でもですね、これだけじゃ動かないんで。fuel/fuel ってのがいますよね…。諸々のディレクトリ群と、config.php などの設定ファイル。これらを、【必要最低限】用意します。あ、そうそう、oil コマンドも必要なので入手しないと。</p>

<p>何しているかって、ただ mkdir して curl でダウンロードしてくるだけです。なんともスマートさのかけらも無い。</p>

<script src="https://gist.github.com/chatii/b55303df1f98dbd8d725.js"></script>

<p>ださいですね。</p>

<p>使い方は簡単。簡単にREADMEを書いています。</p>

<p><a href="https://github.com/chatii/fuelphp_setup">https://github.com/chatii/fuelphp_setup</a></p>

<ul>
  <li>git clone git@github.com:chatii/fuelphp_setup.git <project name=""> して</project></li>
  <li>cd <project name=""> で移って</project></li>
  <li>rm -rf ./.git/ でchatii/fuelphp_setup の情報消して</li>
  <li>git init して</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>curl -sS https://getcomposer.org/installer</td>
          <td>php で Composer.phar 手に入れて</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>php composer.phar install でFuelPHPをインストール。</li>
</ul>

<h3 id="section">解消したかった手間</h3>

<ul>
  <li>oil でインストールすると、FuelPHPのリポジトリがめんどくさい</li>
  <li>core も含めてバージョン管理したい</li>
  <li>Vagrant と連携させてさくっと開発に着手したい</li>
</ul>

<p>お、Vagrant? と思われた方、実は Vagrantfileとchef-soloのレシピを用意しました。</p>

<p><a href="https://github.com/chatii/fuelphp_vagrant">chatii/fuelphp_vagrant</a></p>

<p>こちらも簡単ですが README を用意していますので参照してください。
Vagrant についての説明は省きますが、簡単に使い方を。</p>

<p>この Vagrantfile のあるディレクトリに、 chatii/fuelphp_setup クローンしてあげてください。
クローン時に名付けたディレクトリ名を、Vagrantfile の src_dir に指定してあげます。
また、ステージング環境を指定する場合は fuel_env に指定してください。デフォルトでは development を指定しています。</p>

<p>あまり Vagrant、chef についても詳しくありませんが、個人的には FuelPHP の開発開始までの手間がかなり削減されました。</p>

<p>無駄な Welcome も無いため、そのまま oil generate を使ってモデルなりコントローラーなり作ってもいいですし、自分で手打ちしてもいいですし。</p>

<h2 id="section-1">終わりに</h2>

<p>FuelPHP も 1.x 系が現行の 1.7 で開発は終わり、ということで、今回用意した composer.json もどうせ今だけしか使えない OR 使わないんじゃないかなぁ、と思ってます。が、自分が作った物が誰かの目に触れる、役に立つことになれば、それはとてもとても嬉しいので公開しました。</p>

<p>FuelPHP 2.0 では Composer への対応ってどの程度なんでしょうか？情報を追っていないため、今回作ったものはすぐに用無しになるかもしれませんが、そのほうがいいと思ってます。</p>

<p>最後に。@hosopy さん、スライド勝手に拝借しました。この場を借りて、お礼申し上げます。ありがとうございました！</p>

<p>明日は…どなたでしょうかっ？決まり次第ここを書き換えます</p>

	</section>
	<aside>
		<!-- X:S ZenBackWidget --><div id="zenback-widget-loader"></div><script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var r=Math.ceil((new Date()*1)*Math.random());var j=d.createElement("script");j.id=i;j.async=true;j.src="//w.zenback.jp/v1/?base_uri=http%3A//chatii.net&nsid=111053185887534519%3A%3A111053206288653461&rand="+r;d.body.appendChild(j);}}(document,"zenback-widget-js");</script><!-- X:E ZenBackWidget -->
	</aside>
</article>
        
      </div>
      <div id="r_nav">
        <header>
          <div id="logo">
            <a href="http://chatii.net">chatii-log</a>
          </div>
        </header>
        <section class="google-search">
          <h4>Google サイト内検索</h4>
          <script>
  (function() {
    var cx = '000119443308064670502:w5dfmaqiepm';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
        </section>
        <section>
          <h3>進捗どうですか</h3>
<table>
	<tbody>
		<tr>
			<th>デザイン</th>
			<td>10%</td>
		</tr>
		<tr>
			<th>システム設計・実装</th>
			<td>70%</td>
		</tr>
		<tr>
			<th>やる気</th>
			<td>まあまあ</td>
		</tr>
	</tbody>
</table>
        </section>
        <nav>
          <section class="categories">
            <h2>カテゴリー</h2>
            <ul>
              
              <li>
                <a href="/articles/categories/js.html" title="JavaScript">JavaScript</a>
              </li>
              
              <li>
                <a href="/articles/categories/mac.html" title="Mac OS X">Mac OS X</a>
              </li>
              
              <li>
                <a href="/articles/categories/review.html" title="レビュー">レビュー</a>
              </li>
              
              <li>
                <a href="/articles/categories/etc.html" title="その他">その他</a>
              </li>
              
            </ul>
          </section?
        </nav>
        <div class="ad googlead">
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- Main Left Nav -->
          <ins class="adsbygoogle"
       style="display:inline-block;width:300px;height:250px"
       data-ad-client="ca-pub-0351317529099093"
       data-ad-slot="5267145931"></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
        <div class="facebook-widget">
          <div class="fb-like-box" data-href="http://www.facebook.com/ChatiiLog" data-width="300" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="true" data-show-border="true"></div>
        </div>
        <div class="twitter-widget">
          <a class="twitter-timeline" href="https://twitter.com/chatii0079" data-widget-id="300104256093044736">@chatii0079 からのツイート</a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div>
      </div>
    </div>
    <footer>
      &copy; 2013 chatii All rights reserved.
    </footer>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42096985-1', 'chatii.net');
  ga('send', 'pageview');

</script>
  </body>
</html>